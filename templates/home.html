<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>ToDentro - Home</title>
</head>
<body>
    <div style="padding: 20px;">
        <p>Ol√° {{ usuario }}!</p>
        <form method="GET" action="{{ url_for('role.home') }}">
            <input type="text" id="busca" placeholder="Buscar Role...">
            <button type="submit">üîç</button>
            <a href="{{ url_for('role.home') }}?filtro=todos"><button type="button">Todos os Roles</button></a>
            <a href="{{ url_for('role.home') }}?filtro=meus"><button type="button">Seus Roles</button></a>
        </form>
        <br>
        <a href="{{ url_for('role.criar_role') }}"><button>+ Criar Role</button></a>
        <a href="{{ url_for('usuario.logout') }}"><button style="background-color: red; color: white;">Sair da conta</button></a>

        <hr>
        {% for r in roles %}
            <div class="role-card" data-titulo="{{ r.titulo | lower }}">
                {% include 'role_card.html' %}
            </div>
        {% endfor %}
    </div>

    <script>
    function confirmarExclusao() {
        return confirm("Tem certeza que deseja apagar este role?");
    }
    </script>


</body>

<script>
    const input = document.getElementById('busca');
    input.addEventListener('input', function () {
        const filtro = input.value.toLowerCase();
        const cards = document.querySelectorAll('.role-card');

        cards.forEach(card => {
            const titulo = card.getAttribute('data-titulo');
            card.style.display = titulo.includes(filtro) ? 'block' : 'none';
        });
    });
</script>

</html>
